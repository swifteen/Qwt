<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Qwt User&apos;s Guide: qwt_autoscl.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">src</a></div>
<h1>qwt_autoscl.cpp</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/* -*- mode: C++ ; c-file-style: "stroustrup" -*- *****************************</span>
00002 <span class="comment"> * Qwt Widget Library</span>
00003 <span class="comment"> * Copyright (C) 1997   Josef Wilgen</span>
00004 <span class="comment"> * Copyright (C) 2002   Uwe Rathmann</span>
00005 <span class="comment"> * </span>
00006 <span class="comment"> * This library is free software; you can redistribute it and/or</span>
00007 <span class="comment"> * modify it under the terms of the Qwt License, Version 1.0</span>
00008 <span class="comment"> *****************************************************************************/</span>
00009 
00010 <span class="preprocessor">#include "<a class="code" href="qwt__math_8h.html">qwt_math.h</a>"</span>
00011 <span class="preprocessor">#include "qwt_autoscl.h"</span>
00012 
00013 
00014 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> MinEps=1.0e-10;
00015 
<a name="l00017"></a><a class="code" href="class_qwt_auto_scale.html#a0">00017</a> <a class="code" href="class_qwt_auto_scale.html#a0">QwtAutoScale::QwtAutoScale</a> ()
00018 {
00019     d_autoScale = TRUE;
00020     d_scaleOpt = None;
00021     
00022     d_minValue = 0.0;
00023     d_maxValue = 0.0;
00024     d_scaleMin = 0.0;
00025     d_scaleMax = 0.0;
00026     d_loMargin = 0.0;
00027     d_hiMargin = 0.0;
00028     d_step = 0.0;
00029     d_maxMajor = 8;
00030     d_maxMinor = 5;
00031     d_reset = 1;
00032     d_autoRebuild = TRUE;
00033 }
00034 
00035 
<a name="l00037"></a><a class="code" href="class_qwt_auto_scale.html#a1">00037</a> <a class="code" href="class_qwt_auto_scale.html#a1">QwtAutoScale::~QwtAutoScale</a> ()
00038 {
00039 }
00040 
<a name="l00045"></a><a class="code" href="class_qwt_auto_scale.html#a3">00045</a> <span class="keywordtype">bool</span> <a class="code" href="class_qwt_auto_scale.html#a3">QwtAutoScale::autoScale</a>()<span class="keyword"> const </span>
00046 <span class="keyword"></span>{   
00047     <span class="keywordflow">return</span> d_autoScale; 
00048 }
00049 
<a name="l00054"></a><a class="code" href="class_qwt_auto_scale.html#a17">00054</a> <span class="keywordtype">double</span> <a class="code" href="class_qwt_auto_scale.html#a17">QwtAutoScale::loMargin</a>()<span class="keyword"> const </span>
00055 <span class="keyword"></span>{ 
00056     <span class="keywordflow">return</span> d_loMargin; 
00057 }
00058 
<a name="l00063"></a><a class="code" href="class_qwt_auto_scale.html#a18">00063</a> <span class="keywordtype">double</span> <a class="code" href="class_qwt_auto_scale.html#a18">QwtAutoScale::hiMargin</a>()<span class="keyword"> const </span>
00064 <span class="keyword"></span>{ 
00065     <span class="keywordflow">return</span> d_hiMargin; 
00066 }
00067 
<a name="l00072"></a><a class="code" href="class_qwt_auto_scale.html#a11">00072</a> <span class="keywordtype">int</span> <a class="code" href="class_qwt_auto_scale.html#a11">QwtAutoScale::maxMajor</a>()<span class="keyword"> const </span>
00073 <span class="keyword"></span>{ 
00074     <span class="keywordflow">return</span> d_maxMajor; 
00075 }
00076 
<a name="l00081"></a><a class="code" href="class_qwt_auto_scale.html#a13">00081</a> <span class="keywordtype">int</span> <a class="code" href="class_qwt_auto_scale.html#a13">QwtAutoScale::maxMinor</a>()<span class="keyword"> const </span>
00082 <span class="keyword"></span>{ 
00083     <span class="keywordflow">return</span> d_maxMinor; 
00084 }
00085 
00086 
<a name="l00100"></a><a class="code" href="class_qwt_auto_scale.html#a21">00100</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a21">QwtAutoScale::adjust</a>(<span class="keywordtype">double</span> *x, <span class="keywordtype">int</span> num, <span class="keywordtype">int</span> reset)
00101 {
00102     <span class="keywordflow">if</span> (d_reset || reset)
00103        d_minValue = d_maxValue = x[0];
00104 
00105     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num; i++)
00106     {
00107         <span class="keywordflow">if</span> (x[i] &gt; d_maxValue)
00108            d_maxValue = x[i];
00109         <span class="keywordflow">if</span> (x[i] &lt; d_minValue)
00110            d_minValue = x[i];
00111     }
00112     d_reset = 0;
00113 
00114     <span class="keywordflow">if</span> (d_autoRebuild) 
00115         <a class="code" href="class_qwt_auto_scale.html#a24">build</a>();
00116 }
00117 
00118 
<a name="l00131"></a><a class="code" href="class_qwt_auto_scale.html#a22">00131</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a21">QwtAutoScale::adjust</a>(<span class="keyword">const</span> QwtArray&lt;double&gt; &amp;x, <span class="keywordtype">int</span> reset)
00132 {
00133     <a class="code" href="class_qwt_auto_scale.html#a21">adjust</a>(x.data(), x.size(), reset);
00134 }
00135 
00136 
<a name="l00150"></a><a class="code" href="class_qwt_auto_scale.html#a23">00150</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a21">QwtAutoScale::adjust</a>(<span class="keywordtype">double</span> vmin, <span class="keywordtype">double</span> vmax, <span class="keywordtype">int</span> reset)
00151 { 
00152     <span class="keywordtype">double</span> mxv = qwtMax(vmin,vmax);
00153     <span class="keywordtype">double</span> mnv = qwtMin(vmin,vmax);
00154     
00155     <span class="keywordflow">if</span> (d_reset || reset)
00156     {
00157         d_minValue = mnv;
00158         d_maxValue = mxv;
00159     }
00160     <span class="keywordflow">else</span>
00161     {
00162         <span class="keywordflow">if</span> (d_minValue &gt; mnv) 
00163            d_minValue = mnv;
00164         <span class="keywordflow">if</span> (d_maxValue &lt; mxv)
00165            d_maxValue = mxv;
00166     }
00167     d_reset = 0;
00168 
00169     <span class="keywordflow">if</span> (d_autoRebuild) 
00170         <a class="code" href="class_qwt_auto_scale.html#a24">build</a>();
00171 }
00172 
<a name="l00176"></a><a class="code" href="class_qwt_auto_scale.html#a24">00176</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a24">QwtAutoScale::build</a>() 
00177 {
00178     <span class="keywordflow">if</span> (d_reset) 
00179         <span class="keywordflow">return</span>;
00180     
00181     <span class="keywordflow">if</span> (d_autoScale)
00182     {
00183         <span class="keywordflow">if</span> (d_scaleOpt &amp; Logarithmic) 
00184             <a class="code" href="class_qwt_auto_scale.html#b1">buildLogScale</a>(); 
00185         <span class="keywordflow">else</span> 
00186             <a class="code" href="class_qwt_auto_scale.html#b0">buildLinScale</a>();
00187     }
00188     <span class="keywordflow">else</span>
00189     {
00190         <span class="keywordtype">double</span> start, stop, step;
00191         <span class="keywordflow">if</span> (d_scaleOpt &amp; Inverted)
00192         {
00193             start = d_scaleMax;
00194             stop = d_scaleMin;
00195             step = -d_step;
00196         }
00197         <span class="keywordflow">else</span>
00198         {
00199             start = d_scaleMin;
00200             stop = d_scaleMax;
00201             step = d_step;
00202         }
00203 
00204         d_scldiv.<a class="code" href="class_qwt_scale_div.html#a12">rebuild</a>(start, stop, d_maxMajor, d_maxMinor,
00205             <span class="keywordtype">bool</span>(d_scaleOpt &amp; Logarithmic), step, FALSE); 
00206     }
00207 }
00208 
00209 
<a name="l00213"></a><a class="code" href="class_qwt_auto_scale.html#b0">00213</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#b0">QwtAutoScale::buildLinScale</a> ()
00214 {
00215     <span class="keywordtype">double</span> delta;
00216     <span class="keyword">const</span> <span class="keywordtype">double</span> ticks = double (d_maxMajor);
00217 
00218     <span class="comment">//</span>
00219     <span class="comment">// If in Autoscale Mode, adjust minval and maxval according to</span>
00220     <span class="comment">// the active scale options, and add the margins</span>
00221     <span class="comment">//</span>
00222     <span class="keywordflow">if</span> (!d_autoScale) 
00223         <span class="keywordflow">return</span>;
00224     
00225     <span class="keywordtype">double</span> minval = d_minValue;    <span class="comment">// scale boundaries are based on the</span>
00226     <span class="keywordtype">double</span> maxval = d_maxValue;    <span class="comment">// data.</span>
00227 
00228     <span class="comment">//</span>
00229     <span class="comment">// add / subtract margins</span>
00230     <span class="comment">//</span>
00231     <span class="keywordflow">if</span> (d_loMargin &gt; 0.0)
00232        minval -= d_loMargin;
00233     <span class="keywordflow">if</span> (d_hiMargin &gt; 0.0)
00234        maxval += d_hiMargin;
00235 
00236     <span class="comment">//</span>
00237     <span class="comment">//  Correct minval / maxval according to the scale options</span>
00238     <span class="comment">//</span>
00239     <span class="keywordflow">if</span> (d_scaleOpt &amp; Symmetric)
00240     {
00241         delta = qwtMax(qwtAbs(d_ref - maxval), qwtAbs(d_ref - minval));
00242         maxval = d_ref + delta;
00243         minval = d_ref - delta; 
00244     }
00245     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (d_scaleOpt &amp; IncludeRef)
00246     {
00247         <span class="keywordflow">if</span> (maxval &lt; d_ref) 
00248            maxval = d_ref;
00249         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (minval &gt; d_ref) 
00250            minval = d_ref;
00251     }
00252     
00253     <span class="comment">//</span>
00254     <span class="comment">// first approximation of d_scaleMin and d_scaleMax</span>
00255     <span class="comment">//</span>
00256     <a class="code" href="class_qwt_auto_scale.html#b2">setRange</a>(minval, maxval);
00257     delta = d_scaleMax - d_scaleMin;
00258 
00259 
00260     <span class="comment">// dec := maximal power of ten which fits into the interval</span>
00261     <span class="comment">//   [d_scaleMin,d_scaleMax]</span>
00262     <span class="keyword">const</span> <span class="keywordtype">double</span> dec = pow (10.0, floor (log10 (delta)));
00263 
00264     <span class="comment">//</span>
00265     <span class="comment">//  The following magic line calculates the step size such that</span>
00266     <span class="comment">//      - The number of subintervals will not exceed the maximum</span>
00267     <span class="comment">//        as specified by the user</span>
00268     <span class="comment">//      - The step size fits {1,2,5}*10^n with a natural number n  </span>
00269     <span class="comment">// </span>
00270     <span class="keywordtype">double</span> step = qwtCeil125(delta * 0.999999 / dec / ticks) * dec;
00271 
00272     <span class="comment">//</span>
00273     <span class="comment">//  determine he final values of scaleMin and scaleMax</span>
00274     <span class="comment">//</span>
00275     <span class="keywordflow">if</span> (! (d_scaleOpt &amp; Floating) )
00276     {
00277        <span class="comment">// adjust of d_scaleMin and d_scaleMax such that both are integer</span>
00278        <span class="comment">// multiples of the step size.</span>
00279        d_scaleMin = step * floor ((d_scaleMin + MinEps * step) / step);
00280        d_scaleMax = step * ceil ((d_scaleMax - MinEps * step) / step);
00281     }
00282 
00283     <span class="keywordflow">if</span> (d_scaleOpt &amp; Inverted)
00284     {
00285         step = -step;
00286         d_scldiv.<a class="code" href="class_qwt_scale_div.html#a12">rebuild</a>(d_scaleMax, d_scaleMin, d_maxMajor, d_maxMinor,
00287              FALSE, step, FALSE);
00288     }
00289     <span class="keywordflow">else</span>
00290     {
00291         d_scldiv.<a class="code" href="class_qwt_scale_div.html#a12">rebuild</a>(d_scaleMin, d_scaleMax, d_maxMajor, d_maxMinor,
00292              FALSE, step, TRUE);
00293     }
00294 }
00295 
00296 
<a name="l00300"></a><a class="code" href="class_qwt_auto_scale.html#b1">00300</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#b1">QwtAutoScale::buildLogScale</a> ()
00301 {
00302     <span class="keywordflow">if</span> (!d_autoScale) 
00303         <span class="keywordflow">return</span>;
00304 
00305     <span class="keywordtype">double</span> minval = d_minValue; <span class="comment">// the calculation of scale divisions </span>
00306     <span class="keywordtype">double</span> maxval = d_maxValue; <span class="comment">// is based on the input data.</span>
00307 
00308     <span class="keywordflow">if</span> (d_loMargin &gt; 0.0)
00309         minval /= pow(10.0, d_loMargin);
00310     <span class="keywordflow">if</span> (d_hiMargin &gt; 0.0)
00311         maxval *= pow(10.0, d_hiMargin);
00312 
00313     <span class="keywordflow">if</span> (d_scaleOpt &amp; Symmetric)
00314     {
00315         <span class="keyword">const</span> <span class="keywordtype">double</span> delta = qwtMax(maxval / d_lref,  d_lref / minval); 
00316         maxval = d_lref * delta;
00317         minval = d_lref / delta;    
00318     }
00319     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (d_scaleOpt &amp; IncludeRef)
00320     {
00321         <span class="keywordflow">if</span> (maxval &lt; d_lref) 
00322             maxval = d_lref;
00323         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (minval &gt; d_lref) 
00324             minval = d_lref;
00325     }
00326 
00327     <span class="keyword">const</span> <span class="keywordtype">double</span> ticks = (d_maxMajor &gt; 0) ? double(d_maxMajor) : 1;
00328 
00329     <a class="code" href="class_qwt_auto_scale.html#b2">setRange</a>(minval, maxval);
00330 
00331     <span class="comment">// decades included in the interval</span>
00332     <span class="keyword">const</span> <span class="keywordtype">double</span> decades = qwtAbs(log10 (d_scaleMax / d_scaleMin));
00333 
00334     <span class="comment">// calculate step size in decades</span>
00335 
00336     <span class="keywordtype">double</span> step;
00337     <span class="keywordflow">if</span> ((decades &gt; 1.0) &amp;&amp; (decades &gt; ticks))
00338     {
00339         <span class="keywordtype">double</span> ipart;
00340         <span class="comment">// One interval contains more than one decade.</span>
00341         <span class="comment">// The number of decades in an interval is adjusted</span>
00342         <span class="comment">// to be a multiple of 2,3,5, or 10.</span>
00343         <span class="keywordtype">double</span> fpart = modf (log10 (ceil (decades * 0.999999 / ticks)), &amp;ipart);
00344         <span class="keywordflow">if</span> (fpart &lt; MinEps)
00345            fpart = 1.0;
00346         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((fpart - LOG10_2) &lt; MinEps)
00347            fpart = 2.0;
00348         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((fpart - LOG10_3) &lt; MinEps)
00349            fpart = 3.0;
00350         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((fpart - LOG10_5) &lt; MinEps)
00351            fpart = 5.0;
00352         <span class="keywordflow">else</span>
00353            fpart = 10.0;
00354 
00355         step = pow (10.0, ipart) * fpart;
00356 
00357     }
00358     <span class="keywordflow">else</span>                <span class="comment">// The minimal step size is one decade.</span>
00359     {
00360         step = 1.0;
00361     }
00362     
00363     <span class="keywordflow">if</span> (!(d_scaleOpt &amp; Floating))
00364     {
00365         d_scaleMin = pow (10.0, step * 
00366             floor ((log10(d_scaleMin) + MinEps * step) / step));
00367         d_scaleMax = pow (10.0, step * 
00368             ceil ((log10(d_scaleMax) - MinEps * step) / step));
00369     }
00370 
00371     <span class="keywordflow">if</span> (d_scaleOpt &amp; Inverted)
00372     {
00373         step = -step;
00374         d_scldiv.<a class="code" href="class_qwt_scale_div.html#a12">rebuild</a>(d_scaleMax, d_scaleMin, d_maxMajor, d_maxMinor, TRUE,
00375              step, FALSE);
00376     }
00377     <span class="keywordflow">else</span>
00378     {
00379         d_scldiv.<a class="code" href="class_qwt_scale_div.html#a12">rebuild</a>(d_scaleMin, d_scaleMax, d_maxMajor, d_maxMinor,
00380              TRUE, step, TRUE);
00381     }
00382 }
00383 
<a name="l00391"></a><a class="code" href="class_qwt_auto_scale.html#a6">00391</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a6">QwtAutoScale::changeOptions</a>(<span class="keywordtype">int</span> opt, <span class="keywordtype">bool</span> tf)
00392 {
00393     <span class="keywordflow">if</span> (tf)
00394        d_scaleOpt |= opt;
00395     <span class="keywordflow">else</span>
00396        d_scaleOpt &amp;= (~opt);
00397     <a class="code" href="class_qwt_auto_scale.html#a24">build</a>();
00398 }
00399 
00400 
<a name="l00413"></a><a class="code" href="class_qwt_auto_scale.html#a25">00413</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a25">QwtAutoScale::reset</a>()
00414 {
00415     d_reset = TRUE;
00416     d_scldiv.<a class="code" href="class_qwt_scale_div.html#a11">reset</a>();
00417     d_minValue = 0;
00418     d_maxValue = 0;
00419     d_step = 0;
00420 }
00421 
00422 
<a name="l00439"></a><a class="code" href="class_qwt_auto_scale.html#a2">00439</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a2">QwtAutoScale::setAutoScale</a>()
00440 {
00441     d_autoScale = TRUE;
00442     <a class="code" href="class_qwt_auto_scale.html#a24">build</a>();
00443 }
00444 
<a name="l00461"></a><a class="code" href="class_qwt_auto_scale.html#a16">00461</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a16">QwtAutoScale::setMargins</a>(<span class="keywordtype">double</span> mlo, <span class="keywordtype">double</span> mhi)
00462 {
00463     d_loMargin = qwtMax(mlo,0.0);
00464     d_hiMargin = qwtMax(mhi,0.0);
00465     <a class="code" href="class_qwt_auto_scale.html#a24">build</a>();
00466 }
00467 
00468 
<a name="l00477"></a><a class="code" href="class_qwt_auto_scale.html#a10">00477</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a10">QwtAutoScale::setMaxMajor</a>(<span class="keywordtype">int</span> mx)
00478 {
00479     d_maxMajor = qwtMax(mx,1);
00480     d_maxMajor = qwtMin(mx, 10000);
00481     <a class="code" href="class_qwt_auto_scale.html#a24">build</a>();
00482 }
00483 
<a name="l00489"></a><a class="code" href="class_qwt_auto_scale.html#a12">00489</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a12">QwtAutoScale::setMaxMinor</a>(<span class="keywordtype">int</span> mx)
00490 {
00491     d_maxMinor = qwtMin(qwtMax(mx,0), 100);
00492     <a class="code" href="class_qwt_auto_scale.html#a24">build</a>();
00493 }
00494 
00495 
<a name="l00510"></a><a class="code" href="class_qwt_auto_scale.html#b2">00510</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#b2">QwtAutoScale::setRange</a>(<span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> x2)
00511 {
00512     <span class="keywordtype">double</span> minval = qwtMin(x1, x2);
00513     <span class="keywordtype">double</span> maxval = qwtMax(x1, x2);
00514 
00515     <span class="keywordflow">if</span> (d_scaleOpt &amp; Logarithmic)
00516     {
00517         minval = qwtMin(qwtMax(minval, <a class="code" href="qwt__math_8h.html#a4">LOG_MIN</a>), <a class="code" href="qwt__math_8h.html#a5">LOG_MAX</a>);
00518         maxval = qwtMin(qwtMax(maxval, <a class="code" href="qwt__math_8h.html#a4">LOG_MIN</a>), <a class="code" href="qwt__math_8h.html#a5">LOG_MAX</a>);
00519     }
00520     
00521     <span class="keywordtype">double</span> delta = maxval - minval;
00522     
00523     <span class="keywordflow">if</span> (delta &lt;= 0.0)       <span class="comment">// all values are equal</span>
00524     {               
00525         <span class="keywordflow">if</span> (minval &gt; 0)
00526         {
00527             d_scaleMin = minval * 0.5;
00528             d_scaleMax = maxval * 1.5;
00529         }
00530         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (minval &lt; 0)
00531         {
00532             d_scaleMin = minval * 1.5;
00533             d_scaleMax = maxval * 0.5;
00534         }
00535         <span class="keywordflow">else</span>              <span class="comment">// all values are zero</span>
00536         {           
00537             d_scaleMin = -0.5;
00538             d_scaleMax = 0.5;
00539         }
00540 
00541         delta = d_scaleMax - d_scaleMin;
00542     }
00543     <span class="keywordflow">else</span>            <span class="comment">// the normal case</span>
00544     {               
00545         d_scaleMin = minval;
00546         d_scaleMax = maxval;
00547     }
00548 }
00549 
<a name="l00576"></a><a class="code" href="class_qwt_auto_scale.html#a19">00576</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a19">QwtAutoScale::setScale</a>(<span class="keywordtype">double</span> xmin, <span class="keywordtype">double</span> xmax, <span class="keywordtype">double</span> step)
00577 {
00578     <span class="comment">// turn auto-scaling off and set the</span>
00579     <span class="comment">// scale limits to the desired values</span>
00580     <a class="code" href="class_qwt_auto_scale.html#b2">setRange</a>(xmin,xmax);
00581     d_autoScale = FALSE;
00582     d_step = step;
00583 
00584     <a class="code" href="class_qwt_auto_scale.html#a24">build</a>(); <span class="comment">// rebuild the scale</span>
00585 }
00586 
00587 
<a name="l00649"></a><a class="code" href="class_qwt_auto_scale.html#a7">00649</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a7">QwtAutoScale::setOptions</a>(<span class="keywordtype">int</span> opt)
00650 {
00651     d_scaleOpt = opt;
00652     <a class="code" href="class_qwt_auto_scale.html#a24">build</a>();
00653 }
00654 
00655 
<a name="l00670"></a><a class="code" href="class_qwt_auto_scale.html#a14">00670</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a14">QwtAutoScale::setReference</a>(<span class="keywordtype">double</span> r)
00671 {
00672     d_ref = r;
00673     
00674     <span class="keywordflow">if</span> (r &gt; <a class="code" href="qwt__math_8h.html#a4">LOG_MIN</a> / 2) 
00675         d_lref = qwtMin(r, <a class="code" href="qwt__math_8h.html#a5">LOG_MAX</a> / 2);
00676     <span class="keywordflow">else</span>
00677        d_lref = 1.0;
00678 
00679     <a class="code" href="class_qwt_auto_scale.html#a24">build</a>();
00680 }
00681 
<a name="l00686"></a><a class="code" href="class_qwt_auto_scale.html#a15">00686</a> <span class="keywordtype">double</span> <a class="code" href="class_qwt_auto_scale.html#a15">QwtAutoScale::reference</a>()<span class="keyword"> const </span>
00687 <span class="keyword"></span>{ 
00688     <span class="keywordflow">return</span> d_ref; 
00689 }
00690 
00691 
<a name="l00697"></a><a class="code" href="class_qwt_auto_scale.html#a8">00697</a> <span class="keywordtype">bool</span> <a class="code" href="class_qwt_auto_scale.html#a8">QwtAutoScale::option</a>(<span class="keywordtype">int</span> opt)<span class="keyword"> const</span>
00698 <span class="keyword"></span>{
00699     <span class="keywordflow">return</span> bool(d_scaleOpt &amp; opt);
00700 }
00701 
<a name="l00707"></a><a class="code" href="class_qwt_auto_scale.html#a9">00707</a> <span class="keywordtype">int</span> <a class="code" href="class_qwt_auto_scale.html#a9">QwtAutoScale::options</a>()<span class="keyword"> const </span>
00708 <span class="keyword"></span>{ 
00709     <span class="keywordflow">return</span> d_scaleOpt; 
00710 }
00711 
<a name="l00720"></a><a class="code" href="class_qwt_auto_scale.html#a20">00720</a> <span class="keyword">const</span> <a class="code" href="class_qwt_scale_div.html">QwtScaleDiv</a> &amp;<a class="code" href="class_qwt_auto_scale.html#a20">QwtAutoScale::scaleDiv</a>()<span class="keyword"> const </span>
00721 <span class="keyword"></span>{ 
00722     <span class="keywordflow">return</span> d_scldiv; 
00723 }
00724 
<a name="l00730"></a><a class="code" href="class_qwt_auto_scale.html#a4">00730</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_auto_scale.html#a4">QwtAutoScale::setAutoRebuild</a>(<span class="keywordtype">bool</span> tf) 
00731 { 
00732     d_autoRebuild = tf; 
00733 }
00734 
<a name="l00739"></a><a class="code" href="class_qwt_auto_scale.html#a5">00739</a> <span class="keywordtype">bool</span> <a class="code" href="class_qwt_auto_scale.html#a5">QwtAutoScale::autoRebuild</a>()<span class="keyword"> const</span>
00740 <span class="keyword"></span>{
00741     <span class="keywordflow">return</span> d_autoRebuild;
00742 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Nov 20 13:42:36 2004 for Qwt User's Guide by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
