<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Qwt User&apos;s Guide: qwt_plot_printfilter.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">src</a></div>
<h1>qwt_plot_printfilter.cpp</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/* -*- mode: C++ ; c-file-style: "stroustrup" -*- *****************************</span>
00002 <span class="comment"> * Qwt Widget Library</span>
00003 <span class="comment"> * Copyright (C) 1997   Josef Wilgen</span>
00004 <span class="comment"> * Copyright (C) 2002   Uwe Rathmann</span>
00005 <span class="comment"> * </span>
00006 <span class="comment"> * This library is free software; you can redistribute it and/or</span>
00007 <span class="comment"> * modify it under the terms of the Qwt License, Version 1.0</span>
00008 <span class="comment"> *****************************************************************************/</span>
00009 
00010 <span class="comment">// vim: expandtab</span>
00011 
00012 <span class="preprocessor">#include &lt;qlabel.h&gt;</span>
00013 <span class="preprocessor">#include "qwt_plot.h"</span>
00014 <span class="preprocessor">#include "qwt_plot_dict.h"</span>
00015 <span class="preprocessor">#include "qwt_legend.h"</span>
00016 <span class="preprocessor">#include "qwt_scale.h"</span>
00017 <span class="preprocessor">#include "qwt_plot_printfilter.h"</span>
00018 
00019 <span class="keyword">class </span>QwtPlotPrintFilterCache
00020 {
00021     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_qwt_plot_print_filter.html">QwtPlotPrintFilter</a>;
00022 
00023 <span class="keyword">protected</span>:
00024     QwtPlotPrintFilterCache()
00025     {
00026         legendFonts.setAutoDelete(TRUE);
00027         curveColors.setAutoDelete(TRUE);
00028         curveSymbolBrushColors.setAutoDelete(TRUE);
00029         curveSymbolPenColors.setAutoDelete(TRUE);
00030         markerFonts.setAutoDelete(TRUE);
00031         markerLabelColors.setAutoDelete(TRUE);
00032         markerLineColors.setAutoDelete(TRUE);
00033         markerSymbolBrushColors.setAutoDelete(TRUE);
00034         markerSymbolPenColors.setAutoDelete(TRUE);
00035     }
00036 
00037     QColor titleColor;
00038     QFont titleFont;
00039 
00040     QColor scaleColor[4];
00041     QFont scaleFont[4];
00042     QColor scaleTitleColor[4];
00043     QFont scaleTitleFont[4];
00044 
00045     QIntDict&lt;QFont&gt; legendFonts;
00046 
00047     QColor widgetBackground;
00048     QColor canvasBackground;
00049     QColor gridColors[2];
00050 
00051     QIntDict&lt;QColor&gt; curveColors;
00052     QIntDict&lt;QColor&gt; curveSymbolBrushColors;
00053     QIntDict&lt;QColor&gt; curveSymbolPenColors;
00054 
00055     QIntDict&lt;QFont&gt; markerFonts;
00056     QIntDict&lt;QColor&gt; markerLabelColors;
00057     QIntDict&lt;QColor&gt; markerLineColors;
00058     QIntDict&lt;QColor&gt; markerSymbolBrushColors;
00059     QIntDict&lt;QColor&gt; markerSymbolPenColors;
00060 };
00061 
<a name="l00066"></a><a class="code" href="class_qwt_plot_print_filter.html#a0">00066</a> <a class="code" href="class_qwt_plot_print_filter.html#a0">QwtPlotPrintFilter::QwtPlotPrintFilter</a>():
00067     d_options(PrintAll),
00068     d_cache(0)
00069 {
00070 }
00071 
<a name="l00073"></a><a class="code" href="class_qwt_plot_print_filter.html#a1">00073</a> <a class="code" href="class_qwt_plot_print_filter.html#a1">QwtPlotPrintFilter::~QwtPlotPrintFilter</a>()
00074 {
00075     <span class="keyword">delete</span> d_cache;
00076 }
00077 
<a name="l00090"></a><a class="code" href="class_qwt_plot_print_filter.html#a2">00090</a> QColor <a class="code" href="class_qwt_plot_print_filter.html#a2">QwtPlotPrintFilter::color</a>(<span class="keyword">const</span> QColor &amp;c, Item item, <span class="keywordtype">int</span>)<span class="keyword"> const</span>
00091 <span class="keyword"></span>{
00092     <span class="keywordflow">if</span> ( !(<a class="code" href="class_qwt_plot_print_filter.html#a5">options</a>() &amp; PrintCanvasBackground))
00093     {
00094         <span class="keywordflow">switch</span>(item)
00095         {
00096             <span class="keywordflow">case</span> MajorGrid:
00097                 <span class="keywordflow">return</span> Qt::darkGray;
00098             <span class="keywordflow">case</span> MinorGrid:
00099                 <span class="keywordflow">return</span> Qt::gray;
00100             <span class="keywordflow">default</span>:;
00101         }
00102     }
00103     <span class="keywordflow">return</span> c;
00104 }
00105 
<a name="l00115"></a><a class="code" href="class_qwt_plot_print_filter.html#a3">00115</a> QFont <a class="code" href="class_qwt_plot_print_filter.html#a3">QwtPlotPrintFilter::font</a>(<span class="keyword">const</span> QFont &amp;f, Item, <span class="keywordtype">int</span>)<span class="keyword"> const</span>
00116 <span class="keyword"></span>{
00117     <span class="keywordflow">return</span> f;
00118 }
00119 
<a name="l00124"></a><a class="code" href="class_qwt_plot_print_filter.html#a6">00124</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_plot_print_filter.html#a6">QwtPlotPrintFilter::apply</a>(<a class="code" href="class_qwt_plot.html">QwtPlot</a> *plot)<span class="keyword"> const</span>
00125 <span class="keyword"></span>{
00126     <a class="code" href="class_qwt_plot_print_filter.html">QwtPlotPrintFilter</a> *that = (<a class="code" href="class_qwt_plot_print_filter.html">QwtPlotPrintFilter</a> *)<span class="keyword">this</span>;
00127 
00128     <span class="keyword">delete</span> that-&gt;<a class="code" href="class_qwt_plot_print_filter.html#r1">d_cache</a>;
00129     that-&gt;<a class="code" href="class_qwt_plot_print_filter.html#r1">d_cache</a> = <span class="keyword">new</span> QwtPlotPrintFilterCache;
00130 
00131     QwtPlotPrintFilterCache &amp;cache = *that-&gt;<a class="code" href="class_qwt_plot_print_filter.html#r1">d_cache</a>;
00132 
00133     <span class="keywordflow">if</span> ( plot-&gt;<a class="code" href="class_qwt_plot.html#r0">d_lblTitle</a> )
00134     {
00135         QPalette palette = plot-&gt;<a class="code" href="class_qwt_plot.html#r0">d_lblTitle</a>-&gt;palette();
00136         cache.titleColor = palette.color(
00137             QPalette::Active, QColorGroup::Foreground);
00138         palette.setColor(QPalette::Active, QColorGroup::Foreground,
00139                          <a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(cache.titleColor, Title));
00140         plot-&gt;<a class="code" href="class_qwt_plot.html#r0">d_lblTitle</a>-&gt;setPalette(palette);
00141 
00142         cache.<a class="code" href="class_qwt_plot.html#a28">titleFont</a> = plot-&gt;<a class="code" href="class_qwt_plot.html#r0">d_lblTitle</a>-&gt;font();
00143         plot-&gt;<a class="code" href="class_qwt_plot.html#r0">d_lblTitle</a>-&gt;setFont(<a class="code" href="class_qwt_plot_print_filter.html#a3">font</a>(cache.titleFont, Title));
00144     }
00145     <span class="keywordflow">if</span> ( plot-&gt;<a class="code" href="class_qwt_plot.html#r2">d_legend</a> )
00146     {
00147         QIntDictIterator&lt;QWidget&gt; it = plot-&gt;<a class="code" href="class_qwt_plot.html#r2">d_legend</a>-&gt;<a class="code" href="class_qwt_legend.html#a12">itemIterator</a>();
00148         <span class="keywordflow">for</span> ( QWidget *w = it.toFirst(); w != 0; w = ++it)
00149         {
00150             <span class="keyword">const</span> <span class="keywordtype">int</span> key = it.currentKey();
00151 
00152             cache.legendFonts.insert(it.currentKey(), <span class="keyword">new</span> QFont(w-&gt;font()));
00153             w-&gt;setFont(<a class="code" href="class_qwt_plot_print_filter.html#a3">font</a>(w-&gt;font(), Legend, key));
00154 
00155             <span class="keywordflow">if</span> ( w-&gt;inherits(<span class="stringliteral">"QwtLegendButton"</span>) )
00156             {
00157                 <a class="code" href="class_qwt_legend_button.html">QwtLegendButton</a> *btn = (<a class="code" href="class_qwt_legend_button.html">QwtLegendButton</a> *)w;
00158 
00159                 <a class="code" href="class_qwt_symbol.html">QwtSymbol</a> symbol = btn-&gt;<a class="code" href="class_qwt_legend_item.html#a6">symbol</a>();
00160                 QPen pen = symbol.<a class="code" href="class_qwt_symbol.html#a11">pen</a>();
00161                 QBrush brush = symbol.<a class="code" href="class_qwt_symbol.html#a10">brush</a>();
00162 
00163                 pen.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(pen.color(), CurveSymbol, key));
00164                 brush.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(brush.color(), CurveSymbol, key));
00165 
00166                 symbol.<a class="code" href="class_qwt_symbol.html#a8">setPen</a>(pen);
00167                 symbol.<a class="code" href="class_qwt_symbol.html#a7">setBrush</a>(brush);
00168                 btn-&gt;<a class="code" href="class_qwt_legend_item.html#a5">setSymbol</a>(symbol);
00169 
00170                 pen = btn-&gt;<a class="code" href="class_qwt_legend_item.html#a8">curvePen</a>();
00171                 pen.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(pen.color(), Curve, key));
00172                 btn-&gt;<a class="code" href="class_qwt_legend_item.html#a7">setCurvePen</a>(pen);
00173             }
00174         }
00175     }
00176     <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> axis = 0; axis &lt; QwtPlot::axisCnt; axis++ )
00177     {
00178         <a class="code" href="class_qwt_scale.html">QwtScale</a> *scale = plot-&gt;<a class="code" href="class_qwt_plot.html#r5">d_scale</a>[axis];
00179         <span class="keywordflow">if</span> ( scale )
00180         {
00181             cache.scaleColor[axis] = scale-&gt;palette().color(
00182                 QPalette::Active, QColorGroup::Foreground);
00183             QPalette palette = scale-&gt;palette();
00184             palette.setColor(QPalette::Active, QColorGroup::Foreground,
00185                              <a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(cache.scaleColor[axis], AxisScale, axis));
00186             scale-&gt;setPalette(palette);
00187 
00188             cache.scaleFont[axis] = scale-&gt;font();
00189             scale-&gt;setFont(<a class="code" href="class_qwt_plot_print_filter.html#a3">font</a>(cache.scaleFont[axis], AxisScale, axis));
00190 
00191             cache.scaleTitleColor[axis] = scale-&gt;<a class="code" href="class_qwt_scale.html#a6">titleColor</a>();
00192             scale-&gt;<a class="code" href="class_qwt_scale.html#a5">setTitleColor</a>(
00193                 <a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(cache.scaleTitleColor[axis], AxisTitle, axis));
00194 
00195             cache.scaleTitleFont[axis] = scale-&gt;<a class="code" href="class_qwt_scale.html#a8">titleFont</a>();
00196             scale-&gt;<a class="code" href="class_qwt_scale.html#a7">setTitleFont</a>(
00197                 <a class="code" href="class_qwt_plot_print_filter.html#a3">font</a>(cache.scaleTitleFont[axis], AxisTitle, axis));
00198 
00199             <span class="keywordtype">int</span> startDist, endDist;
00200             scale-&gt;<a class="code" href="class_qwt_scale.html#a14">minBorderDist</a>(startDist, endDist);
00201             scale-&gt;<a class="code" href="class_qwt_scale.html#a11">setBorderDist</a>(startDist, endDist);
00202         }
00203     }
00204 
00205     cache.widgetBackground = plot-&gt;backgroundColor();
00206     plot-&gt;setBackgroundColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(cache.widgetBackground, WidgetBackground));
00207 
00208     cache.<a class="code" href="class_qwt_plot.html#a34">canvasBackground</a> = plot-&gt;<a class="code" href="class_qwt_plot.html#a34">canvasBackground</a>();
00209     plot-&gt;<a class="code" href="class_qwt_plot.html#a33">setCanvasBackground</a>(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(cache.canvasBackground, CanvasBackground));
00210 
00211     QPen pen = plot-&gt;<a class="code" href="class_qwt_plot.html#r9">d_grid</a>-&gt;<a class="code" href="class_qwt_grid.html#a17">majPen</a>();
00212     cache.gridColors[0] = pen.color();
00213     pen.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(pen.color(), MajorGrid));
00214     plot-&gt;<a class="code" href="class_qwt_plot.html#r9">d_grid</a>-&gt;<a class="code" href="class_qwt_grid.html#a16">setMajPen</a>(pen);
00215 
00216     pen = plot-&gt;<a class="code" href="class_qwt_plot.html#r9">d_grid</a>-&gt;<a class="code" href="class_qwt_grid.html#a19">minPen</a>();
00217     cache.gridColors[1] = pen.color();
00218     pen.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(pen.color(), MinorGrid));
00219     plot-&gt;<a class="code" href="class_qwt_plot.html#r9">d_grid</a>-&gt;<a class="code" href="class_qwt_grid.html#a18">setMinPen</a>(pen);
00220     
00221     QIntDictIterator&lt;QwtPlotCurve&gt; itc(*plot-&gt;<a class="code" href="class_qwt_plot.html#r7">d_curves</a>);
00222     <span class="keywordflow">for</span> (<a class="code" href="class_qwt_plot_curve.html">QwtPlotCurve</a> *c = itc.toFirst(); c != 0; c = ++itc )
00223     {
00224         <span class="keyword">const</span> <span class="keywordtype">int</span> key = itc.currentKey();
00225 
00226         <a class="code" href="class_qwt_symbol.html">QwtSymbol</a> symbol = c-&gt;<a class="code" href="class_qwt_curve.html#a30">symbol</a>();
00227 
00228         QPen pen = symbol.<a class="code" href="class_qwt_symbol.html#a11">pen</a>();
00229         cache.curveSymbolPenColors.insert(key, <span class="keyword">new</span> QColor(pen.color()));
00230         pen.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(pen.color(), CurveSymbol, key));
00231         symbol.<a class="code" href="class_qwt_symbol.html#a8">setPen</a>(pen);
00232 
00233         QBrush brush = symbol.<a class="code" href="class_qwt_symbol.html#a10">brush</a>();
00234         cache.curveSymbolBrushColors.insert(key, <span class="keyword">new</span> QColor(brush.color()));
00235         brush.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(brush.color(), CurveSymbol, key));
00236         symbol.<a class="code" href="class_qwt_symbol.html#a7">setBrush</a>(brush);
00237 
00238         c-&gt;<a class="code" href="class_qwt_curve.html#a29">setSymbol</a>(symbol);
00239 
00240         pen = c-&gt;<a class="code" href="class_qwt_curve.html#a22">pen</a>();
00241         cache.curveColors.insert(key, <span class="keyword">new</span> QColor(pen.color()));
00242         pen.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(pen.color(), Curve, key));
00243         c-&gt;<a class="code" href="class_qwt_curve.html#a21">setPen</a>(pen);
00244     }
00245 
00246     QIntDictIterator&lt;QwtPlotMarker&gt; itm(*plot-&gt;<a class="code" href="class_qwt_plot.html#r8">d_markers</a>);
00247     <span class="keywordflow">for</span> (<a class="code" href="class_qwt_plot_marker.html">QwtPlotMarker</a> *m = itm.toFirst(); m != 0; m = ++itm )
00248     {
00249         <span class="keyword">const</span> <span class="keywordtype">int</span> key = itm.currentKey();
00250 
00251         cache.markerFonts.insert(key, <span class="keyword">new</span> QFont(m-&gt;<a class="code" href="class_qwt_marker.html#a20">font</a>()));
00252         m-&gt;<a class="code" href="class_qwt_marker.html#a19">setFont</a>(<a class="code" href="class_qwt_plot_print_filter.html#a3">font</a>(m-&gt;<a class="code" href="class_qwt_marker.html#a20">font</a>(), Marker, key));
00253 
00254         QPen pen = m-&gt;<a class="code" href="class_qwt_marker.html#a16">labelPen</a>();
00255         cache.markerLabelColors.insert(key, <span class="keyword">new</span> QColor(pen.color()));
00256         pen.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(pen.color(), Marker, key));
00257         m-&gt;<a class="code" href="class_qwt_marker.html#a15">setLabelPen</a>(pen);
00258         
00259         pen = m-&gt;<a class="code" href="class_qwt_marker.html#a18">linePen</a>();
00260         cache.markerLineColors.insert(key, <span class="keyword">new</span> QColor(pen.color()));
00261         pen.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(pen.color(), Marker, key));
00262         m-&gt;<a class="code" href="class_qwt_marker.html#a17">setLinePen</a>(pen);
00263 
00264         <a class="code" href="class_qwt_symbol.html">QwtSymbol</a> symbol = m-&gt;<a class="code" href="class_qwt_marker.html#a7">symbol</a>();
00265 
00266         pen = symbol.<a class="code" href="class_qwt_symbol.html#a11">pen</a>();
00267         cache.markerSymbolPenColors.insert(key, <span class="keyword">new</span> QColor(pen.color()));
00268         pen.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(pen.color(), MarkerSymbol, key));
00269         symbol.<a class="code" href="class_qwt_symbol.html#a8">setPen</a>(pen);
00270 
00271         QBrush brush = symbol.<a class="code" href="class_qwt_symbol.html#a10">brush</a>();
00272         cache.markerSymbolBrushColors.insert(key, <span class="keyword">new</span> QColor(brush.color()));
00273         brush.setColor(<a class="code" href="class_qwt_plot_print_filter.html#a2">color</a>(brush.color(), MarkerSymbol, key));
00274         symbol.<a class="code" href="class_qwt_symbol.html#a7">setBrush</a>(brush);
00275 
00276         m-&gt;<a class="code" href="class_qwt_marker.html#a6">setSymbol</a>(symbol);
00277     }
00278 }
00279 
<a name="l00284"></a><a class="code" href="class_qwt_plot_print_filter.html#a7">00284</a> <span class="keywordtype">void</span> <a class="code" href="class_qwt_plot_print_filter.html#a7">QwtPlotPrintFilter::reset</a>(<a class="code" href="class_qwt_plot.html">QwtPlot</a> *plot)<span class="keyword"> const</span>
00285 <span class="keyword"></span>{
00286     <span class="keywordflow">if</span> ( d_cache == 0 )
00287         <span class="keywordflow">return</span>;
00288 
00289     QFont *font;
00290     QColor *color;
00291 
00292     <span class="keywordflow">if</span> ( plot-&gt;<a class="code" href="class_qwt_plot.html#r0">d_lblTitle</a> )
00293     {
00294         QPalette palette = plot-&gt;<a class="code" href="class_qwt_plot.html#r0">d_lblTitle</a>-&gt;palette();
00295         palette.setColor(
00296             QPalette::Active, QColorGroup::Foreground, d_cache-&gt;titleColor);
00297         plot-&gt;<a class="code" href="class_qwt_plot.html#r0">d_lblTitle</a>-&gt;setPalette(palette);
00298 
00299         plot-&gt;<a class="code" href="class_qwt_plot.html#r0">d_lblTitle</a>-&gt;setFont(d_cache-&gt;titleFont);
00300     }
00301 
00302     <span class="keywordflow">if</span> ( plot-&gt;<a class="code" href="class_qwt_plot.html#r2">d_legend</a> )
00303     {
00304         QIntDictIterator&lt;QWidget&gt; it = plot-&gt;<a class="code" href="class_qwt_plot.html#r2">d_legend</a>-&gt;<a class="code" href="class_qwt_legend.html#a12">itemIterator</a>();
00305         <span class="keywordflow">for</span> ( QWidget *w = it.toFirst(); w != 0; w = ++it)
00306         {
00307             <span class="keyword">const</span> <span class="keywordtype">int</span> key = it.currentKey();
00308 
00309             font = d_cache-&gt;legendFonts.find(key);
00310             <span class="keywordflow">if</span> ( font )
00311                 w-&gt;setFont(*font);
00312 
00313             <span class="keywordflow">if</span> ( w-&gt;inherits(<span class="stringliteral">"QwtLegendButton"</span>) )
00314             {
00315                 <a class="code" href="class_qwt_legend_button.html">QwtLegendButton</a> *btn = (<a class="code" href="class_qwt_legend_button.html">QwtLegendButton</a> *)w;
00316 
00317                 <a class="code" href="class_qwt_symbol.html">QwtSymbol</a> symbol = btn-&gt;<a class="code" href="class_qwt_legend_item.html#a6">symbol</a>();
00318                 color = d_cache-&gt;curveSymbolPenColors.find(key);
00319                 <span class="keywordflow">if</span> ( color )
00320                 {
00321                     QPen pen = symbol.<a class="code" href="class_qwt_symbol.html#a11">pen</a>();
00322                     pen.setColor(*color);
00323                     symbol.<a class="code" href="class_qwt_symbol.html#a8">setPen</a>(pen);
00324                 }
00325 
00326                 color = d_cache-&gt;curveSymbolBrushColors.find(key);
00327                 <span class="keywordflow">if</span> ( color )
00328                 {
00329                     QBrush brush = symbol.<a class="code" href="class_qwt_symbol.html#a10">brush</a>();
00330                     brush.setColor(*color);
00331                     symbol.<a class="code" href="class_qwt_symbol.html#a7">setBrush</a>(brush);
00332                 }
00333                 btn-&gt;<a class="code" href="class_qwt_legend_item.html#a5">setSymbol</a>(symbol);
00334 
00335                 color = d_cache-&gt;curveColors.find(key);
00336                 <span class="keywordflow">if</span> ( color )
00337                 {
00338                     QPen pen = btn-&gt;<a class="code" href="class_qwt_legend_item.html#a8">curvePen</a>();
00339                     pen.setColor(*color);
00340                     btn-&gt;<a class="code" href="class_qwt_legend_item.html#a7">setCurvePen</a>(pen);
00341                 }
00342             }
00343         }
00344     }
00345     <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> axis = 0; axis &lt; QwtPlot::axisCnt; axis++ )
00346     {
00347         <a class="code" href="class_qwt_scale.html">QwtScale</a> *scale = plot-&gt;<a class="code" href="class_qwt_plot.html#r5">d_scale</a>[axis];
00348         <span class="keywordflow">if</span> ( scale )
00349         {
00350             QPalette palette = scale-&gt;palette();
00351             palette.setColor(QPalette::Active, QColorGroup::Foreground,
00352                              d_cache-&gt;scaleColor[axis]);
00353             scale-&gt;setPalette(palette);
00354             scale-&gt;setFont(d_cache-&gt;scaleFont[axis]);
00355 
00356             scale-&gt;<a class="code" href="class_qwt_scale.html#a5">setTitleColor</a>(d_cache-&gt;scaleTitleColor[axis]);
00357             scale-&gt;<a class="code" href="class_qwt_scale.html#a7">setTitleFont</a>(d_cache-&gt;scaleTitleFont[axis]);
00358 
00359             <span class="keywordtype">int</span> startDist, endDist;
00360             scale-&gt;<a class="code" href="class_qwt_scale.html#a14">minBorderDist</a>(startDist, endDist);
00361             scale-&gt;<a class="code" href="class_qwt_scale.html#a11">setBorderDist</a>(startDist, endDist);
00362         }
00363     }
00364 
00365     plot-&gt;setBackgroundColor(d_cache-&gt;widgetBackground);
00366     plot-&gt;<a class="code" href="class_qwt_plot.html#a33">setCanvasBackground</a>(d_cache-&gt;canvasBackground);
00367 
00368     QPen pen = plot-&gt;<a class="code" href="class_qwt_plot.html#r9">d_grid</a>-&gt;<a class="code" href="class_qwt_grid.html#a17">majPen</a>();
00369     pen.setColor(d_cache-&gt;gridColors[0]);
00370     plot-&gt;<a class="code" href="class_qwt_plot.html#r9">d_grid</a>-&gt;<a class="code" href="class_qwt_grid.html#a16">setMajPen</a>(pen);
00371 
00372     pen = plot-&gt;<a class="code" href="class_qwt_plot.html#r9">d_grid</a>-&gt;<a class="code" href="class_qwt_grid.html#a19">minPen</a>();
00373     pen.setColor(d_cache-&gt;gridColors[1]);
00374     plot-&gt;<a class="code" href="class_qwt_plot.html#r9">d_grid</a>-&gt;<a class="code" href="class_qwt_grid.html#a18">setMinPen</a>(pen);
00375     
00376     QIntDictIterator&lt;QwtPlotCurve&gt; itc(*plot-&gt;<a class="code" href="class_qwt_plot.html#r7">d_curves</a>);
00377     <span class="keywordflow">for</span> (<a class="code" href="class_qwt_plot_curve.html">QwtPlotCurve</a> *c = itc.toFirst(); c != 0; c = ++itc )
00378     {
00379         <span class="keyword">const</span> <span class="keywordtype">int</span> key = itc.currentKey();
00380 
00381         <a class="code" href="class_qwt_symbol.html">QwtSymbol</a> symbol = c-&gt;<a class="code" href="class_qwt_curve.html#a30">symbol</a>();
00382 
00383         color = d_cache-&gt;curveSymbolPenColors.find(key);
00384         <span class="keywordflow">if</span> ( color )
00385         {
00386             QPen pen = symbol.<a class="code" href="class_qwt_symbol.html#a11">pen</a>();
00387             pen.setColor(*color);
00388             symbol.<a class="code" href="class_qwt_symbol.html#a8">setPen</a>(pen);
00389         }
00390 
00391         color = d_cache-&gt;curveSymbolBrushColors.find(key);
00392         <span class="keywordflow">if</span> ( color )
00393         {
00394             QBrush brush = symbol.<a class="code" href="class_qwt_symbol.html#a10">brush</a>();
00395             brush.setColor(*color);
00396             symbol.<a class="code" href="class_qwt_symbol.html#a7">setBrush</a>(brush);
00397         }
00398         c-&gt;<a class="code" href="class_qwt_curve.html#a29">setSymbol</a>(symbol);
00399 
00400         color = d_cache-&gt;curveColors.find(key);
00401         <span class="keywordflow">if</span> ( color )
00402         {
00403             QPen pen = c-&gt;<a class="code" href="class_qwt_curve.html#a22">pen</a>();
00404             pen.setColor(*color);
00405             c-&gt;<a class="code" href="class_qwt_curve.html#a21">setPen</a>(pen);
00406         }
00407     }
00408 
00409     QIntDictIterator&lt;QwtPlotMarker&gt; itm(*plot-&gt;<a class="code" href="class_qwt_plot.html#r8">d_markers</a>);
00410     <span class="keywordflow">for</span> (<a class="code" href="class_qwt_plot_marker.html">QwtPlotMarker</a> *m = itm.toFirst(); m != 0; m = ++itm )
00411     {
00412         <span class="keyword">const</span> <span class="keywordtype">int</span> key = itm.currentKey();
00413 
00414         font = d_cache-&gt;markerFonts.find(key);
00415         <span class="keywordflow">if</span> ( font )
00416             m-&gt;<a class="code" href="class_qwt_marker.html#a19">setFont</a>(*font);
00417 
00418         color = d_cache-&gt;markerLabelColors.find(key);
00419         <span class="keywordflow">if</span> ( color )
00420         {
00421             QPen pen = m-&gt;<a class="code" href="class_qwt_marker.html#a16">labelPen</a>();
00422             pen.setColor(*color);
00423             m-&gt;<a class="code" href="class_qwt_marker.html#a15">setLabelPen</a>(pen);
00424         }
00425 
00426         color = d_cache-&gt;markerLineColors.find(key);
00427         <span class="keywordflow">if</span> ( color )
00428         {
00429             QPen pen = m-&gt;<a class="code" href="class_qwt_marker.html#a18">linePen</a>();
00430             pen.setColor(*color);
00431             m-&gt;<a class="code" href="class_qwt_marker.html#a17">setLinePen</a>(pen);
00432         }
00433         
00434         <a class="code" href="class_qwt_symbol.html">QwtSymbol</a> symbol = m-&gt;<a class="code" href="class_qwt_marker.html#a7">symbol</a>();
00435 
00436         color = d_cache-&gt;markerSymbolPenColors.find(key);
00437         <span class="keywordflow">if</span> ( color )
00438         {
00439             QPen pen = symbol.<a class="code" href="class_qwt_symbol.html#a11">pen</a>();
00440             pen.setColor(*color);
00441             symbol.<a class="code" href="class_qwt_symbol.html#a8">setPen</a>(pen);
00442         }
00443 
00444         color = d_cache-&gt;markerSymbolBrushColors.find(key);
00445         <span class="keywordflow">if</span> ( color )
00446         {
00447             QBrush brush = symbol.<a class="code" href="class_qwt_symbol.html#a10">brush</a>();
00448             brush.setColor(*color);
00449             symbol.<a class="code" href="class_qwt_symbol.html#a7">setBrush</a>(brush);
00450         }
00451 
00452         m-&gt;<a class="code" href="class_qwt_marker.html#a6">setSymbol</a>(symbol);
00453 
00454     }
00455 
00456     <a class="code" href="class_qwt_plot_print_filter.html">QwtPlotPrintFilter</a> *that = (<a class="code" href="class_qwt_plot_print_filter.html">QwtPlotPrintFilter</a> *)<span class="keyword">this</span>;
00457     <span class="keyword">delete</span> that-&gt;<a class="code" href="class_qwt_plot_print_filter.html#r1">d_cache</a>;
00458     that-&gt;<a class="code" href="class_qwt_plot_print_filter.html#r1">d_cache</a> = 0;
00459 }
00460 
00461 <span class="comment">// Local Variables:</span>
00462 <span class="comment">// mode: C++</span>
00463 <span class="comment">// c-file-style: "stroustrup"</span>
00464 <span class="comment">// indent-tabs-mode: nil</span>
00465 <span class="comment">// End:</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Nov 20 13:42:37 2004 for Qwt User's Guide by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
